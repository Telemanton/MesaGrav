<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="'Panel de Control - ' + ${currentUser.name} + ' | UJA'">Panel de Control - UJA</title>
    <link rel="stylesheet" th:href="@{/css/styles-home.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="menu-container">
            <div class="logo">
                <img src="https://idp.ujaen.es/autenticacion/module.php/themeujaen3/assets/logo_uja.png" alt="UJA Logo">
            </div>
            <nav>
                <ul>
                    <li><a href="/user-home">Inicio</a></li>
                    <li><a href="#">Históricos</a></li>
                    <li class="dropdown-container">
                        <a href="#" id="userDropdown">
                            <i class="fas fa-user-circle"></i> 
                            <span th:text="${currentUser.username}">Usuario</span>
                        </a>
                        <ul id="dropdownMenu" class="dropdown-content">
                            <li><a href="#">Mi Perfil</a></li>
                            <li><a href="#" onclick="event.preventDefault(); window.location.href='/';">Cerrar sesión</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="main-wrapper">
        <section class="intro">
            <h1>Gestión de Maquinaria Industrial</h1>
            <p>Seleccione el equipo para visualizar datos en tiempo real y telemetría.</p>
        </section>

        <section class="articles-grid">
            <!-- Cards de maquinaria (sin cambios) -->
            <div class="article-card">
                <div class="icon-header">
                    <i class="fas fa-layer-group"></i>
                </div>
                <h2>Mesa Gravimétrica</h2>
                <p>Monitor de separación de minerales por densidad y vibración.</p>
                <div class="card-footer">
                    <span class="badge online">En línea</span>
                    <button class="btn-enter" onclick="window.location.href='/mesa-gravimetrica'">Entrar</button>
                </div>
            </div>
            <!-- ... resto de cards igual ... -->
        </section>

        <section class="user-panel">
            <h3><i class="fas fa-id-badge"></i> Sesión Iniciada</h3>
            <div class="user-details">
                <p><strong>Operador:</strong> 
                    <span th:text="${currentUser.name + ' ' + currentUser.surname}">Nombre Apellido</span>
                </p>
                <p><strong>Username:</strong> 
                    <span th:text="${currentUser.username}">usuario</span>
                </p>
                <p><strong>Email:</strong> 
                    <span th:text="${currentUser.email}">usuario@ujaen.es</span>
                </p>
                <p><strong>Rol:</strong> 
                    <span th:text="${currentUser.role}" class="role-badge">Usuario</span>
                </p>
                <p><strong>Fecha creación:</strong> 
                    <span th:text="${currentUser.createdAt}">Fecha</span>
                </p>
            </div>
        </section>
    </div>

    <!-- Script igual -->
    <script>
        document.getElementById('userDropdown').addEventListener('click', function(e) {
            e.preventDefault();
            const menu = document.getElementById('dropdownMenu');
            menu.classList.toggle('show');
        });

        window.onclick = function(event) {
            if (!event.target.closest('.dropdown-container')) {
                const menu = document.getElementById('dropdownMenu');
                if (menu.classList.contains('show')) {
                    menu.classList.remove('show');
                }
            }
        }
    </script>
</body>
</html>
