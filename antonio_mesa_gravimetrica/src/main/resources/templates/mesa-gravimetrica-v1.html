<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mesa gravim√©trica</title>
</head>
<body>
    <h1>ADXL345 y Frecuencia en tiempo real</h1>
    <div id="datos">
        <p>X: <span id="x">0</span></p>
        <p>Y: <span id="y">0</span></p>
        <p>Z: <span id="z">0</span></p>
        <p>Pitch: <span id="pitch">0</span></p>
        <p>Roll: <span id="roll">0</span></p>
        <p>Frecuencia: <span id="frecuencia">0</span> Hz</p>
    </div>

    <script>
        async function actualizarDatos() {
            try {
                const response = await fetch('/sensor');
                const data = await response.json();

                // Datos del sensor ADXL345
                const adxl = data.adxl || {};
                document.getElementById('x').textContent = (adxl.x ?? 0).toFixed(2);
                document.getElementById('y').textContent = (adxl.y ?? 0).toFixed(2);
                document.getElementById('z').textContent = (adxl.z ?? 0).toFixed(2);
                document.getElementById('pitch').textContent = (adxl.pitch ?? 0).toFixed(2);
                document.getElementById('roll').textContent = (adxl.roll ?? 0).toFixed(2);

                // Datos del sensor de frecuencia
                const freq = data.frecuencia || {};
                document.getElementById('frecuencia').textContent = (freq.frecuencia ?? 0).toFixed(2);

            } catch(err) {
                console.error('Error al obtener datos:', err);
            }
        }

        setInterval(actualizarDatos, 1000); // cada 1s
        actualizarDatos();
    </script>
</body>
</html>
